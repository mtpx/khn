<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../../css/main.css"/>
    <link rel="stylesheet" href="../../css/sales.css"/>
    <link rel="stylesheet" href="../../css/credits.css"/>
    <script src="../../js/jquery-3.4.1.min.js" type=""></script>
    <script src="../../js/bootstrap.min.js" type=""></script>
    <script type="text/javascript" src="../../js/common/main.js"></script>
    <title>Credits</title>
</h:head>

<h:body>
    <div id="wrapper">
        <div id="navigationMenuPlaceholder"></div>
        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <p:growl id="growl" class="ui-growl" life="4000" showDetail="true"/>
                        <!-- Left Align -->
                        <p:panelGrid columns="3" layout="grid" style="width:100%;" styleClass="ui-panelgrid-blank">
                            <h:form id="creditCalculator">
                                <h3>Credit calculator</h3>
                                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
                                    <p:outputLabel for="@next" value="Credit interest rate:"/>
                                    <p:inputText id="creditInterestRate" value="#{creditBean.creditInterestRate}" readonly="true"/>

                                    <p:outputLabel for="@next" value="Number of installments:"/>
                                    <p:inputText id="numberOfInstallments" value="#{creditBean.numberOfInstallments}" validatorMessage="Number of installments should be greater than 1"/>

                                    <p:outputLabel for="@next" value="Credit amount:"/>
                                    <p:inputText id="creditAmount" value="#{creditBean.creditAmount}" validatorMessage="Credit amount should be greater than 100"/>

                                    <p:outputLabel for="@next" value="Monthly income:"/>
                                    <p:inputText id="monthlyIncome" value="#{creditBean.monthlyIncome}"/>

                                    <p:outputLabel for="@next" value="Monthly expenses:"/>
                                    <p:inputText id="monthlyExpenses" value="#{creditBean.monthlyExpenses}"/>
                                </p:panelGrid>
                                <p:commandButton value="Calculate credit" icon="pi pi-check" action="#{creditBean.calculateCredit}" update="creditCalculationResults,growl,creditApplication,creditCalculator" validateClient="true"/>
                            </h:form>

                            <h:form id="creditCalculationResults">
                                <h:panelGroup layout="block" rendered="#{creditBean.creditCalculationResultVisibility}">
                                    <h3>Credit calculation results</h3>
                                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-8, ui-grid-col-4" >
                                        <p:outputLabel for="@next" value="Amount to repay:"/>
                                        <p:inputText id="amountToRepay" value="#{creditBean.amountToRepay}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Monthly installment:"/>
                                        <p:inputText id="monthlyInstallment" value="#{creditBean.monthlyInstallment}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Repayment date:"/>
                                        <p:inputText id="repaymentDate" value="#{creditBean.repaymentDate}" readonly="true"/>
                                    </p:panelGrid>
                                    <p:commandButton value="Apply for credit" icon="pi pi-check" update="growl, creditApplication" action="#{creditBean.applyForCredit}"/>
                                </h:panelGroup>
                            </h:form>

                            <h:form id="creditApplication">
                                <h:panelGroup layout="block" rendered="#{creditBean.creditApplicationVisibility}">
                                    <h3>Credit application</h3>
                                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-8, ui-grid-col-4">
                                        <p:outputLabel for="@next" value="First name:"/>
                                        <p:inputText id="creditApplication_firstName" value="#{creditBean.firstName}" validatorMessage="First name should not be empty"/>

                                        <p:outputLabel for="@next" value="Last name:"/>
                                        <p:inputText id="creditApplication_lastName" value="#{creditBean.lastName}" validatorMessage="Last name should not be empty"/>

                                        <p:outputLabel for="@next" value="Credit interest rate:"/>
                                        <p:inputText id="creditApplication_creditInterestRate" value="#{creditBean.creditInterestRate}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Number of installments:"/>
                                        <p:inputText id="creditApplication_numberOfInstallments" value="#{creditBean.numberOfInstallments}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Monthly installment:"/>
                                        <p:inputText id="creditApplication_monthlyInstallments" value="#{creditBean.monthlyInstallment}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Credit amount:"/>
                                        <p:inputText id="creditApplication_creditAmount" value="#{creditBean.creditAmount}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Amount to repay:"/>
                                        <p:inputText id="creditApplication_amountToRepay" value="#{creditBean.amountToRepay}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Monthly income:"/>
                                        <p:inputText id="creditApplication_monthlyIncome" value="#{creditBean.monthlyIncome}" readonly="true"/>

                                        <p:outputLabel for="@next" value="Monthly expenses:"/>
                                        <p:inputText id="creditApplication_monthlyExpenses" value="#{creditBean.monthlyExpenses}" readonly="true"/>
                                    </p:panelGrid>
                                    <p:commandButton value="Submit credit application" icon="pi pi-check" action="#{creditBean.submitCreditApplication}" update="growl"/>
                                </h:panelGroup>
                            </h:form>
                        </p:panelGrid>
                        <br/>
                    </div>
                </div>
            </div>
        </div>
        <div id="footerPlaceholder">
        </div>
        <!-- /#page-content-wrapper -->
    </div>
</h:body>
</html>
